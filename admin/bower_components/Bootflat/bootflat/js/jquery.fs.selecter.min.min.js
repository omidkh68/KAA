!function(an,am){function al(a){a=an.extend({},N,a||{}),null===P&&(P=an("body"));for(var h=an(this),g=0,d=h.length;d>g;g++){ak(h.eq(g),a)}return h}function ak(o,n){if(!o.hasClass("selecter-element")){n=an.extend({},n,o.data("selecter-options")),n.external&&(n.links=!0);var m=o.find("option, optgroup"),l=m.filter("option"),i=l.filter(":selected"),f=i.length>0?l.index(i):1,e="div";n.tabIndex=o[0].tabIndex,o[0].tabIndex=-1,n.multiple=o.prop("multiple"),n.disabled=o.is(":disabled");var a="",v="";v+="<"+e+' class="selecter '+n.customClass,T?v+=" mobile":n.cover&&(v+=" cover"),v+=n.multiple?" multiple":" closed",n.disabled&&(v+=" disabled"),v+='" tabindex="'+n.tabIndex+'">',v+="</"+e+">",n.multiple||(a+='<span class="selecter-selected'+(""!==n.label?" placeholder":"")+'">',a+=an("<span></span>").text(M(""!==i.text()?i.text():n.label,n.trim)).html(),a+="</span>"),a+='<div class="selecter-options">',a+="</div>",o.addClass("selecter-element").wrap(v).after(a);var r=o.parent(".selecter"),p=an.extend({$select:o,$allOptions:m,$options:l,$selecter:r,$selected:r.find(".selecter-selected"),$itemsWrapper:r.find(".selecter-options"),index:-1,guid:H++},n);aj(p),p.multiple||U(f,p),void 0!==an.fn.scroller&&p.$itemsWrapper.scroller(),p.$selecter.on("touchstart.selecter",".selecter-selected",p,ai).on("click.selecter",".selecter-selected",p,af).on("click.selecter",".selecter-item",p,ab).on("close.selecter",p,ac).data("selecter",p),p.$select.on("change.selecter",p,aa),T||(p.$selecter.on("focus.selecter",p,Z).on("blur.selecter",p,Y),p.$select.on("focus.selecter",p,function(b){b.data.$selecter.trigger("focus")}))}}function aj(a){for(var p="",o=a.links?"a":"span",n=0,m=0,l=a.$allOptions.length;l>m;m++){var k=a.$allOptions.eq(m);if("OPTGROUP"===k[0].tagName){p+='<span class="selecter-group',k.is(":disabled")&&(p+=" disabled"),p+='">'+k.attr("label")+"</span>"}else{var j=k.val();k.attr("value")||k.attr("value",j),p+="<"+o+' class="selecter-item',k.is(":selected")&&(p+=" selected"),k.is(":disabled")&&(p+=" disabled"),p+='" ',p+=a.links?'href="'+j+'"':'data-value="'+j+'"',p+=">"+an("<span></span>").text(M(k.text(),a.trim)).html()+"</"+o+">",n++}}a.$itemsWrapper.html(p),a.$items=a.$selecter.find(".selecter-item")}function ai(e){e.stopPropagation();var d=e.data,f=e.originalEvent;I(d.timer),d.touchStartX=f.touches[0].clientX,d.touchStartY=f.touches[0].clientY,d.$selecter.on("touchmove.selecter",".selecter-selected",d,ah).on("touchend.selecter",".selecter-selected",d,ag)}function ah(e){var d=e.data,f=e.originalEvent;(Math.abs(f.touches[0].clientX-d.touchStartX)>10||Math.abs(f.touches[0].clientY-d.touchStartY)>10)&&d.$selecter.off("touchmove.selecter touchend.selecter")}function ag(d){var c=d.data;c.$selecter.off("touchmove.selecter touchend.selecter click.selecter"),c.timer=J(c.timer,1000,function(){c.$selecter.on("click.selecter",".selecter-selected",c,af)}),af(d)}function af(h){h.preventDefault(),h.stopPropagation();var g=h.data;if(!g.$select.is(":disabled")){if(an(".selecter").not(g.$selecter).trigger("close.selecter",[g]),T&&!R){var b=g.$select[0];if(am.document.createEvent){var a=am.document.createEvent("MouseEvents");a.initMouseEvent("mousedown",!1,!0,am,0,0,0,0,0,!1,!1,!1,!1,0,null),b.dispatchEvent(a)}else{b.fireEvent&&b.fireEvent("onmousedown")}}else{g.$selecter.hasClass("closed")?ae(h):g.$selecter.hasClass("open")&&ac(h)}}}function ae(g){g.preventDefault(),g.stopPropagation();var f=g.data;if(!f.$selecter.hasClass("open")){var j=f.$selecter.offset(),i=P.outerHeight(),h=f.$itemsWrapper.outerHeight(!0);f.index>=0?f.$items.eq(f.index).position():{left:0,top:0};j.top+h>i&&f.$selecter.addClass("bottom"),f.$itemsWrapper.show(),f.$selecter.removeClass("closed").addClass("open"),P.on("click.selecter-"+f.guid,":not(.selecter-options)",f,ad),S(f)}}function ad(a){a.preventDefault(),a.stopPropagation(),0===an(a.currentTarget).parents(".selecter").length&&ac(a)}function ac(d){d.preventDefault(),d.stopPropagation();var c=d.data;c.$selecter.hasClass("open")&&(c.$itemsWrapper.hide(),c.$selecter.removeClass("open bottom").addClass("closed"),P.off(".selecter-"+c.guid))}function ab(a){a.preventDefault(),a.stopPropagation();var h=an(this),g=a.data;if(!g.$select.is(":disabled")){if(g.$itemsWrapper.is(":visible")){var f=g.$items.index(h);f!==g.index&&(U(f,g),Q(g))}g.multiple||ac(a)}}function aa(a,j){var i=an(this),h=a.data;if(!j&&!h.multiple){var g=h.$options.index(h.$options.filter("[value='"+K(i.val())+"']"));U(g,h),Q(h)}}function Z(a){a.preventDefault(),a.stopPropagation();var d=a.data;d.$select.is(":disabled")||d.multiple||(d.$selecter.addClass("focus").on("keydown.selecter-"+d.guid,d,W),an(".selecter").not(d.$selecter).trigger("close.selecter",[d]))}function Y(a){a.preventDefault(),a.stopPropagation();var d=a.data;d.$selecter.removeClass("focus").off("keydown.selecter-"+d.guid),an(".selecter").not(d.$selecter).trigger("close.selecter",[d])}function W(a){var n=a.data;if(13===a.keyCode){n.$selecter.hasClass("open")&&(ac(a),U(n.index,n)),Q(n)}else{if(!(9===a.keyCode||a.metaKey||a.altKey||a.ctrlKey||a.shiftKey)){a.preventDefault(),a.stopPropagation();var m=n.$items.length-1,l=n.index<0?0:n.index;if(an.inArray(a.keyCode,V?[38,40,37,39]:[38,40])>-1){l+=38===a.keyCode||V&&37===a.keyCode?-1:1,0>l&&(l=0),l>m&&(l=m)}else{var k,j,i=String.fromCharCode(a.keyCode).toUpperCase();for(j=n.index+1;m>=j;j++){if(k=n.$options.eq(j).text().charAt(0).toUpperCase(),k===i){l=j;break}}if(0>l||l===n.index){for(j=0;m>=j;j++){if(k=n.$options.eq(j).text().charAt(0).toUpperCase(),k===i){l=j;break}}}}l>=0&&(U(l,n),S(n))}}}function U(h,g){var l=g.$items.eq(h),k=l.hasClass("selected"),j=l.hasClass("disabled");if(!j){if(-1===h&&""!==g.label){g.$selected.html(g.label)}else{if(k){g.multiple&&(g.$options.eq(h).prop("selected",null),l.removeClass("selected"))}else{var i=l.html();l.data("value");g.multiple?g.$options.eq(h).prop("selected",!0):(g.$selected.html(i).removeClass("placeholder"),g.$items.filter(".selected").removeClass("selected"),g.$select[0].selectedIndex=h),l.addClass("selected")}}g.multiple||(g.index=h)}}function S(a){var d=a.index>=0?a.$items.eq(a.index).position():{left:0,top:0};void 0!==an.fn.scroller?a.$itemsWrapper.scroller("scroll",a.$itemsWrapper.find(".scroller-content").scrollTop()+d.top,0).scroller("reset"):a.$itemsWrapper.scrollTop(a.$itemsWrapper.scrollTop()+d.top)}function Q(b){b.links?O(b):(b.callback.call(b.$selecter,b.$select.val(),b.index),b.$select.trigger("change",[!0]))}function O(b){var d=b.$select.val();b.external?am.open(d):am.location.href=d}function M(d,c){return 0===c?d:d.length>c?d.substring(0,c)+"...":d}function K(b){return"string"==typeof b?b.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"):b}function J(f,e,h,g){return I(f,g),g===!0?setInterval(h,e):setTimeout(h,e)}function I(b){null!==b&&(clearInterval(b),b=null)}var H=0,X=am.navigator.userAgent||am.navigator.vendor||am.opera,V=/Firefox/i.test(X),T=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(X),R=V&&T,P=null,N={callback:an.noop,cover:!1,customClass:"",label:"",external:!1,links:!1,trim:0},L={defaults:function(a){return N=an.extend(N,a||{}),an(this)},disable:function(a){return an(this).each(function(i,h){var g=an(h).parent(".selecter").data("selecter");if(g){if("undefined"!=typeof a){var b=g.$items.index(g.$items.filter("[data-value="+a+"]"));g.$items.eq(b).addClass("disabled"),g.$options.eq(b).prop("disabled",!0)}else{g.$selecter.hasClass("open")&&g.$selecter.find(".selecter-selected").trigger("click.selecter"),g.$selecter.addClass("disabled"),g.$select.prop("disabled",!0)}}})},enable:function(a){return an(this).each(function(i,h){var g=an(h).parent(".selecter").data("selecter");if(g){if("undefined"!=typeof a){var b=g.$items.index(g.$items.filter("[data-value="+a+"]"));g.$items.eq(b).removeClass("disabled"),g.$options.eq(b).prop("disabled",!1)}else{g.$selecter.removeClass("disabled"),g.$select.prop("disabled",!1)}}})},destroy:function(){return an(this).each(function(a,f){var e=an(f).parent(".selecter").data("selecter");e&&(e.$selecter.hasClass("open")&&e.$selecter.find(".selecter-selected").trigger("click.selecter"),void 0!==an.fn.scroller&&e.$selecter.find(".selecter-options").scroller("destroy"),e.$select[0].tabIndex=e.tabIndex,e.$selected.remove(),e.$itemsWrapper.remove(),e.$selecter.off(".selecter"),e.$select.off(".selecter").removeClass("selecter-element").show().unwrap())})},refresh:function(){return an(this).each(function(a,h){var g=an(h).parent(".selecter").data("selecter");if(g){var e=g.index;g.$allOptions=g.$select.find("option, optgroup"),g.$options=g.$allOptions.filter("option"),g.index=-1,e=g.$options.index(g.$options.filter(":selected")),aj(g),g.multiple||U(e,g)}})}};an.fn.selecter=function(b){return L[b]?L[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?this:al.apply(this,arguments)},an.selecter=function(b){"defaults"===b&&L.defaults.apply(this,Array.prototype.slice.call(arguments,1))}}(jQuery,window);